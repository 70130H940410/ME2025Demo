{% extends "layout.html" %}
{% block title %}成績輸入系統{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="/static/css/score.css">
{% endblock %}

{% block content %}
<h2>成績列表（依學號遞增）</h2>

{% if msg %}<p class="msg">{{ msg }}</p>{% endif %}

<table class="grades">
  <thead>
    <tr><th>學生姓名</th><th>學號</th><th>成績</th></tr>
  </thead>
  <tbody>
  {% for name, sid, score in grades %}
    <tr>
      <td>{{ name }}</td>
      <td>{{ sid }}</td>
      <td>{{ score }}</td>
    </tr>
  {% else %}
    <tr><td colspan="3" class="empty">目前沒有資料</td></tr>
  {% endfor %}
  </tbody>
</table>

<!-- 新增成績區塊 -->
<section class="panel">
  <h3>新增成績</h3>
  <form action="{{ url_for('grades_add') }}" method="post" class="form-grid">
    <label>學生姓名</label>
    <input name="name" required>

    <label>學號</label>
    <input name="student_id" inputmode="numeric" pattern="\d+" required>

    <label>成績</label>
    <input name="score" inputmode="numeric" pattern="\d+" required>

    <button type="submit" class="btn primary full">提交</button>
  </form>
</section>

<!-- ✅ 新增一條分隔線 -->
<hr class="divider">

<!-- 刪除成績區塊（獨立） -->
<section class="panel danger-panel">
  <h3>刪除學生資料</h3>
  <form action="{{ url_for('grades_delete') }}" method="post" class="form-inline">
    <input name="delete_student_id" placeholder="輸入學號" inputmode="numeric" pattern="\d+" required>
    <button type="submit" class="btn danger">刪除</button>
  </form>
</section>

<!-- 上傳照片（獨立區塊） -->
<section class="panel">
  <h3>上傳照片</h3>
  <form action="{{ url_for('upload_photo') }}" method="post"
        enctype="multipart/form-data" class="form-inline">
    <input type="file" name="photo" accept="image/*" required>
    <button type="submit" class="btn primary">上傳</button>
  </form>
  <p class="hint">支援 png / jpg / jpeg / gif / webp，最大 5MB。</p>
</section>

<!-- 照片牆（顯示已上傳圖片） -->
{% if gallery %}
<section class="panel">
  <h3>滾動的照片（風滾草）</h3>
  <div class="tumble-belt">
    {% for full in gallery %}
      <img
        class="tumble {{ 'rtl' if loop.index is odd }}"
        src="{{ full }}"
        alt="upload {{ loop.index }}"
        style="
          --dur: {{ 16 + (loop.index % 6)*3 }}s;
          --size: {{ 70 + (loop.index % 4)*22 }}px;
          --y: {{ (loop.index % 5)*3 }}px;
        "
      >
    {% endfor %}
  </div>
</section>
{% else %}
<section class="panel">
  <h3>滾動的照片（風滾草）</h3>
  <div class="tumble-belt">
    <img class="tumble" src="/static/uploads/default.jpg" alt="default">
  </div>
</section>
{% endif %}



{% endblock %}




<!-- version1
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登入成績介面</title>
</head>
<body>
    <h1>成績登入系統</h1> <br> <br>

    <div>這裡要顯示登入教師</div> <br> <br>

    <button>登出</button> <br> <br>

    <h4>已儲存資料</h4> <br> <br>
    !--  table[border="1" width="200px"]>tr*5>th*3   --
    <div id="storedScoreTable"></div>

    <h4>已儲存資料</h4> <br> <br>

    <form action="" method="">
        <label for="studentName">學生姓名:</label>
        <input name="input_StudentName" id="studentName"> <br> <br>

        <label for="studentNumber">學號:</label>
        <input name="input_StudentNumber" id="studentNumber"> <br> <br>

        <label for="studentScore">成績:</label>
        <input name="input_StudentScore" id="studentScore"> <br> <br>

        <button>提交</button>
    </form>

    <h4>刪除學生資料</h4> 

    <form action="" method="">

        <label for="deleteStudentNumber">學號:</label>
        <input name="input_DeleteStudentNumber" id="deleteStudentNumber"> <br> <br>

        <button>刪除</button>

    </form>

    


      
    

    
    
</body>
</html>  -->


<!-- version2 移動到layout
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>成績輸入系統</title>
  <style>
    body { font-family: "Noto Sans TC", Arial, sans-serif; margin:0; background:#f7f8fb; }
    header {
      position: sticky; top:0; background:#fff; border-bottom:1px solid #eee;
      padding:12px 16px; display:flex; align-items:center; justify-content:space-between;
    }
    .brand { font-weight:700; }
    main { max-width: 960px; margin: 26px auto; padding: 0 16px; }
    .badge { background:#eef3ff; color:#2b5fd9; padding:4px 10px; border-radius:999px; }
    button { border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
    .danger { background:#ef4444; color:#fff; }
  </style>
</head>
<body>
  <header>
    <div class="brand">成績輸入系統</div>
    <form action="/logout" method="post">
      <span class="badge">教師：{{ teacher }}</span>
      <button class="danger" type="submit" style="margin-left:10px;">登出</button>
    </form>
  </header>

  <main>
    <h2>歡迎，{{ teacher }}</h2>
    <p>（下一步：在此載入/顯示成績表、提供新增/刪除等功能）</p>
  </main>
</body>
</html>  -->
